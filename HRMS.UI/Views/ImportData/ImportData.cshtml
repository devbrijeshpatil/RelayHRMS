@{
	ViewData["Title"] = "Import Data";
	Layout = "~/Views/Shared/_mainLayout.cshtml";
	string baseUrl = Configuration["BaseUrlSettings:baseUrl"];
}
  <title>Search Panel</title>

  <!-- jQuery + Bootstrap + SweetAlert -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    .search-heading {
      background-color: #f0f0f0;
      padding: 8px 12px;
      font-weight: bold;
      color: #333;
      border-bottom: 1px solid #ccc;
      font-size: 16px;
    }
    .form-section {
      padding: 15px;
      border: 1px solid #ccc;
    }
    .btn-custom {
      background-color: #3e4b6d;
      color: white;
      border: none;
      padding: 5px 15px;
      font-weight: bold;
    }
    .btn-custom:hover {
      background-color: #2c3752;
    }
    label.form-label-fixed {
      width: 180px;
    }
  </style>


<div class="container mt-3">
  <div class="search-heading">Search Panel</div>
  <div class="form-section">

    <!-- Top Row -->
    <div class="row align-items-center mb-2">
      <div class="col-md-3">
        <input type="checkbox" id="chkBetween" />
        <label for="chkBetween" class="ms-1">Between Date Range</label>
      </div>

<div class="col-md-3 d-none" id="dateRangeFields">
  <label class="form-label-fixed">Start Date:</label>
  <input type="text" id="startDate" class="form-control form-control-sm" />
</div>
<div class="col-md-3 d-none" id="endDateField">
  <label class="form-label-fixed">End Date:</label>
  <input type="text" id="endDate" class="form-control form-control-sm" />
</div>

      <div class="col-md-3" id="monthField">
        <label class="form-label-fixed">Month<span class="text-danger">*</span>:</label>
        <select class="form-select form-select-sm" id="month">
          <option value="">--Select--</option>
          <option>January</option>
          <option>February</option>
          <option>March</option>
          <option>April</option>
          <option>May</option>
          <option>June</option>
          <option>July</option>
          <option>August</option>
          <option>September</option>
          <option>October</option>
          <option>November</option>
          <option>December</option>
        </select>
      </div>
      <div class="col-md-3" id="yearField">
        <label class="form-label-fixed">Year<span class="text-danger">*</span>:</label>
        <select class="form-select form-select-sm" id="year">
          <option value="">--Select--</option>
          <option>2024</option>
          <option selected>2025</option>
          <option>2026</option>
        </select>
      </div>
    </div>

    <!-- 2nd Row -->
<!-- 2nd Row: Realigned to be under Month and Year -->
<div class="row mb-2">
  <div class="col-md-3 offset-md-3">
    <label class="form-label-fixed">Employee Code:</label>
    <input type="text" class="form-control form-control-sm" id="empCode">
  </div>
  <div class="col-md-3 offset-md-0">
    <label class="form-label-fixed">Branch:</label>
    <select class="form-select form-select-sm" id="branch">
      <option>--Select--</option>
      <option>Head Office</option>
      <option>Branch 1</option>
    </select>
  </div>
</div>


    <!-- 3rd Row -->
    <div class="row mb-2">
      <div class="col-md-3">
        <label class="form-label-fixed">Allowance:</label>
        <select class="form-select form-select-sm" id="allowance">
          <option value="">--Select--</option>
          <option>DA</option>
          <option>TA</option>
        </select>
      </div>
      <div class="col-md-3 d-flex align-items-end">
        <button class="btn btn-custom me-2" id="btnGo">Go</button>
        <button class="btn btn-custom" id="btnClear">Clear</button>
      </div>
    </div>

    <!-- 4th Row (Radio + Add Allowance) -->
    <div class="row align-items-center mb-2">
      <div class="col-md-3">
        <input type="radio" name="type" id="r1">
        <label for="r1" class="ms-1">Allowance</label>
      </div>
      <div class="col-md-3">
        <input type="radio" name="type" id="r2">
        <label for="r2" class="ms-1">Attendance</label>
      </div>
      <div class="col-md-3">
        <input type="radio" name="type" id="r3">
        <label for="r3" class="ms-1">Present day</label>
      </div>
      <div class="col-md-3 text-end">
        <button class="btn btn-custom" id="btnAdd">Add Allowance</button>
      </div>
    </div>

    <!-- 5th Row (More radio buttons) -->
    <div class="row align-items-center">
      <div class="col-md-3">
        <input type="radio" name="type" id="r4">
        <label for="r4" class="ms-1">Production Details</label>
      </div>
      <div class="col-md-3">
        <input type="radio" name="type" id="r5">
        <label for="r5" class="ms-1">Tax on Other Head</label>
      </div>
      <div class="col-md-3">
        <input type="radio" name="type" id="r6">
        <label for="r6" class="ms-1">Monthly Shift</label>
      </div>
    </div>

  </div>
</div>  
<!-- Heading based on radio button click -->
<div class="row mt-3">
  <div class="col-12">
    <h5 id="selectedSectionHeading" class="text-white py-2 px-3 d-none" style="background-color: #3e4b6d; border-radius: 3px;"></h5>
  </div>
</div> 
<!-- Grid Display Section -->
<div id="gridSection" class="mt-3 d-none">
   <!-- This is where your table/grid will show -->
  <div id="gridContent">
    <!-- Fill this div dynamically with HTML table -->
  </div>
</div>



<script>
$(document).ready(function () {
  // Helper: get YYYY-MM-DD
  function formatDate(date) {
    const year = date.getFullYear();
    const month = ('0' + (date.getMonth() + 1)).slice(-2);
    const day = ('0' + date.getDate()).slice(-2);
    return `${day}-${month}-${year}`;
  }

  // Auto fill start and end of current month
  function fillCurrentMonthDates() {
    const now = new Date();
    const firstDay = new Date(now.getFullYear(), now.getMonth(), 1);
    const lastDay = new Date(now.getFullYear(), now.getMonth() + 1, 0);

    $('#startDate').val(formatDate(firstDay));
    $('#endDate').val(formatDate(lastDay));
  }

  // Toggle Between Date Range
  $('#chkBetween').change(function () {
    if ($(this).is(':checked')) {
      $('#monthField, #yearField').hide();
      $('#dateRangeFields, #endDateField').removeClass('d-none');

      fillCurrentMonthDates(); // fill automatically
    } else {
      $('#monthField, #yearField').show();
      $('#dateRangeFields, #endDateField').addClass('d-none');
    }
  });

  // Clear
  $('#btnClear').click(function () {
    $('input[type="text"]').val('');
    $('select').val('');
    $('#chkBetween').prop('checked', false).trigger('change');
  });

  // Add Allowance
  $('#btnAdd').click(function () {
    Swal.fire('Add Allowance button clicked');
  });
});


  // Show heading based on radio selection
  $('input[name="type"]').change(function () {
    var selectedText = $('label[for="' + $(this).attr('id') + '"]').text();
    $('#selectedSectionHeading')
      .removeClass('d-none')
      .text(selectedText);
  });

$(document).ready(function () {
  const gridMap = {
    r1: "Allowance Details",
    r2: "Attendance Details",
    r3: "Present Day Details",
    r4: "Production Details",
    r5: "Tax on Other Head",
    r6: "Monthly Shift Details"
  };

  $('input[name="type"]').change(function () {
    const selectedId = $(this).attr('id');
    const heading = gridMap[selectedId];

    // Show the grid section
    $('#gridSection').removeClass('d-none');

    // Set the heading
    $('#gridTitle').text(heading);

    // TEMP: You can replace this with API data later
    $('#gridContent').html(getMockTable(heading));
  });

  // Example static table for now (can be replaced with AJAX)
  function getMockTable(title) {
    return `
      <table class="table table-bordered table-sm mt-2">
        <thead class="table-light">
          <tr>
            <th>Employee Code</th>
            <th>Employee Name</th>
            <th>Shift Name</th>
            <th>For Date</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>11369</td>
            <td>Mahesh R</td>
            <td>General Shift</td>
            <td>05/6/2025</td>
          </tr>
          <tr>
            <td>11366</td>
            <td>Bharvad Gopal Rajubhai</td>
            <td>General Shift</td>
            <td>01/6/2025</td>
          </tr>
        </tbody>
      </table>
    `;
  }
});
</script>


